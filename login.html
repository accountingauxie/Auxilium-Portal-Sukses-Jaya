<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Login – AUXILIUM Portal</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; font-family: Inter, sans-serif; }

body {
background: #ffffff;
height: 100vh;
display: flex;
justify-content: center;
align-items: center;
overflow: hidden;
position: relative;
}

#bg-canvas { position: fixed; inset: 0; z-index: 0; }
.overlay { position: fixed; inset: 0; background: rgba(255,255,255,0.75); z-index: 1; }

.card {
width: 360px;
padding: 28px;
background: #ffffffcc;
border-radius: 16px;
backdrop-filter: blur(12px);
box-shadow: 0 6px 22px rgba(0,0,0,0.12);
z-index: 2;
}

.card img { width: 210px; margin: 0 auto 10px; display: block; }
h2 { text-align: center; margin-bottom: 6px; font-size: 22px; }
p { text-align: center; color: #666; font-size: 13px; margin-bottom: 20px; }

label { font-size: 13px; margin-bottom: 4px; display: block; }
input {
width: 100%; padding: 10px; margin-bottom: 14px;
border: 1px solid #ddd; border-radius: 8px; font-size: 14px;
}

button {
width: 100%; padding: 11px; background: #2563eb;
color: white; border: none; border-radius: 999px; font-size: 14px;
cursor: pointer;
}

.msg {
font-size: 13px;
margin-bottom: 10px;
padding: 8px;
border-radius: 8px;
display: none;
}
.error { background: #fee2e2; color: #b91c1c; }
.success { background: #dcfce7; color: #166534; }
</style>
</head>

<body>

<canvas id="bg-canvas"></canvas>
<div class="overlay"></div>

<div class="card">
<img src="assets/auxilium_logo_pure_white_bg.png" alt="Logo">
<h2>Masuk</h2>
<p>AUXILIUM Portal – CV. Sukses Jaya</p>

<div id="msg" class="msg"></div>

<label>Email</label>
<input id="email" type="email">

<label>Password</label>
<input id="password" type="password">

<button onclick="login()">Login</button>

<p style="margin-top:12px;">
Belum punya akun? <a href="register.html">Daftar</a>
</p>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbz9f2k0J61tNTMBc_j2sqcxoNaFvIpXCT3MCFcbBEfY_a3pYbP3qAVeDj9tSpZxpsn6ug/exec"; // ganti dengan URL Web App

function showMsg(text, type) {
  const msg = document.getElementById("msg");
  msg.textContent = text;
  msg.className = "msg " + type;
  msg.style.display = "block";
}

async function login() {
  const u = email.value.trim();
  const p = password.value.trim();

  if (!u || !p) {
    showMsg("Email dan password wajib diisi.", "error");
    return;
  }

  try {
    const res = await fetch(API_URL + "?action=login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email: u, password: p })
    });

    const data = await res.json();

    if (!data.success) {
      showMsg(data.message || "Login gagal.", "error");
      return;
    }

    // simpan session
    localStorage.setItem("uxilium_current_user", JSON.stringify(data.user));
    showMsg("Login berhasil!", "success");

    setTimeout(() => {
      const role = (data.user.role || "").toLowerCase();
      if (role === "owner" || role === "admin") {
        window.location.href = "admin.html";
      } else {
        window.location.href = "index.html";
      }
    }, 700);

  } catch (err) {
    console.error(err);
    showMsg("Terjadi kesalahan koneksi ke server.", "error");
  }
}

/* ANIMASI BACKGROUND – tetap sama seperti file kamu */
</script>


</body>
</html>
